/n/local/bin/tophat -p8 --transcriptome-index=/home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc -o TopHat_aln/4hoursposttraining3 /home/mab/Genomes/bowtie_indexes/bwt2/Drosophila_melanogaster.BDGP5.71.min test2/s_1_1_CGTACG.fastq.gz,test2/s_2_1_CGTACG.fastq.gz,test2/s_3_1_CGTACG.fastq.gz,test2/s_4_1_CGTACG.fastq.gz,test2/s_5_1_CGTACG.fastq.gz
/n/local/stage/tophat/tophat_2.0.8/gtf_juncs /home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc.gff  > TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.juncs
#>prep_reads:
/n/local/stage/tophat/tophat_2.0.8/prep_reads --min-anchor 8 --splice-mismatches 0 --min-report-intron 50 --max-report-intron 500000 --min-isoform-fraction 0.15 --output-dir TopHat_aln/4hoursposttraining3/ --max-multihits 20 --max-seg-multihits 40 --segment-length 25 --segment-mismatches 2 --min-closure-exon 100 --min-closure-intron 50 --max-closure-intron 5000 --min-coverage-intron 50 --max-coverage-intron 20000 --min-segment-intron 50 --max-segment-intron 500000 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --max-insertion-length 3 --max-deletion-length 3 -z gzip -p8 --gtf-annotations /home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc.gff --gtf-juncs TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.juncs --no-closure-search --no-coverage-search --no-microexon-search --fastq --aux-outfile=TopHat_aln/4hoursposttraining3/prep_reads.info --index-outfile=TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.bam.index --sam-header=TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam --outfile=TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.bam test2/s_1_1_CGTACG.fastq.gz,test2/s_2_1_CGTACG.fastq.gz,test2/s_3_1_CGTACG.fastq.gz,test2/s_4_1_CGTACG.fastq.gz,test2/s_5_1_CGTACG.fastq.gz
#>map_start:
/n/local/stage/tophat/tophat_2.0.8/bam2fastx --all --fastq TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.bam|/n/local/bin/bowtie2-align -q -k 60 -D 15 -R 2 -N 0 -L 20 -i S,1,1.25 --gbar 4 --mp 6,2 --np 1 --rdg 5,3 --rfg 5,3 --score-min C,-14,0 -p 8 --sam-no-hd -x /home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc -|/n/local/stage/tophat/tophat_2.0.8/fix_map_ordering --bowtie2-min-score 15 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min.tc.bwt.samheader.sam - - TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.bam | /n/local/stage/tophat/tophat_2.0.8/map2gtf --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam /home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc.gff - TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g.bam > TopHat_aln/4hoursposttraining3/logs/m2g_left_kept_reads.out
/n/local/stage/tophat/tophat_2.0.8/bam2fastx --all --fastq TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.bam|/n/local/bin/bowtie2-align -q -k 20 -D 15 -R 2 -N 0 -L 20 -i S,1,1.25 --gbar 4 --mp 6,2 --np 1 --rdg 5,3 --rfg 5,3 --score-min C,-14,0 -p 8 --sam-no-hd -x /home/mab/Genomes/bowtie_indexes/bwt2/Drosophila_melanogaster.BDGP5.71.min -|/n/local/stage/tophat/tophat_2.0.8/fix_map_ordering --bowtie2-min-score 15 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --index-outfile TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.mapped.bam.index --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam - TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.mapped.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_unmapped.bam
#>map_segments:
gzip -cd< TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.fq.z|/n/local/bin/bowtie2-align -q -k 41 -N 1 -L 20 -p 8 --sam-no-hd -x /home/mab/Genomes/bowtie_indexes/bwt2/Drosophila_melanogaster.BDGP5.71.min -|/n/local/stage/tophat/tophat_2.0.8/fix_map_ordering --bowtie2-min-score 10 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --index-outfile TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.bam.index --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam - TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1_unmapped.bam
gzip -cd< TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.fq.z|/n/local/bin/bowtie2-align -q -k 41 -N 1 -L 20 -p 8 --sam-no-hd -x /home/mab/Genomes/bowtie_indexes/bwt2/Drosophila_melanogaster.BDGP5.71.min -|/n/local/stage/tophat/tophat_2.0.8/fix_map_ordering --bowtie2-min-score 10 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --index-outfile TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.bam.index --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam - TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2_unmapped.bam
#>find_juncs:
/n/local/stage/tophat/tophat_2.0.8/segment_juncs --min-anchor 8 --splice-mismatches 0 --min-report-intron 50 --max-report-intron 500000 --min-isoform-fraction 0.15 --output-dir TopHat_aln/4hoursposttraining3/ --max-multihits 20 --max-seg-multihits 40 --segment-length 25 --segment-mismatches 2 --min-closure-exon 100 --min-closure-intron 50 --max-closure-intron 5000 --min-coverage-intron 50 --max-coverage-intron 20000 --min-segment-intron 50 --max-segment-intron 500000 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --max-insertion-length 3 --max-deletion-length 3 -z gzip -p8 --gtf-annotations /home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc.gff --gtf-juncs TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.juncs --no-closure-search --no-microexon-search --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam --ium-reads TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1_unmapped.bam,TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2_unmapped.bam TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min.fa TopHat_aln/4hoursposttraining3/tmp/segment.juncs TopHat_aln/4hoursposttraining3/tmp/segment.insertions TopHat_aln/4hoursposttraining3/tmp/segment.deletions TopHat_aln/4hoursposttraining3/tmp/segment.fusions TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.mapped.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.bam,TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.bam
#>juncs_db:
/n/local/stage/tophat/tophat_2.0.8/juncs_db 3 25 TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.juncs /dev/null /dev/null /dev/null TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min.fa > TopHat_aln/4hoursposttraining3/tmp/segment_juncs.fa
/n/local/bin/bowtie2-build TopHat_aln/4hoursposttraining3/tmp/segment_juncs.fa TopHat_aln/4hoursposttraining3/tmp/segment_juncs
#>map2juncs:
gzip -cd< TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.fq.z|/n/local/bin/bowtie2-align -q -k 41 -N 1 -L 20 -p 8 --sam-no-hd -x TopHat_aln/4hoursposttraining3/tmp/segment_juncs -|/n/local/stage/tophat/tophat_2.0.8/fix_map_ordering --bowtie2-min-score 10 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --index-outfile TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.to_spliced.bam.index --sam-header TopHat_aln/4hoursposttraining3/tmp/segment_juncs.bwt.samheader.sam - TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.to_spliced.bam
gzip -cd< TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.fq.z|/n/local/bin/bowtie2-align -q -k 41 -N 1 -L 20 -p 8 --sam-no-hd -x TopHat_aln/4hoursposttraining3/tmp/segment_juncs -|/n/local/stage/tophat/tophat_2.0.8/fix_map_ordering --bowtie2-min-score 10 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --index-outfile TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.to_spliced.bam.index --sam-header TopHat_aln/4hoursposttraining3/tmp/segment_juncs.bwt.samheader.sam - TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.to_spliced.bam
/n/local/stage/tophat/tophat_2.0.8/long_spanning_reads --min-anchor 8 --splice-mismatches 0 --min-report-intron 50 --max-report-intron 500000 --min-isoform-fraction 0.15 --output-dir TopHat_aln/4hoursposttraining3/ --max-multihits 20 --max-seg-multihits 40 --segment-length 25 --segment-mismatches 2 --min-closure-exon 100 --min-closure-intron 50 --max-closure-intron 5000 --min-coverage-intron 50 --max-coverage-intron 20000 --min-segment-intron 50 --max-segment-intron 500000 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --max-insertion-length 3 --max-deletion-length 3 -z gzip -p8 --gtf-annotations /home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc.gff --gtf-juncs TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.juncs --no-closure-search --no-microexon-search --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam --bowtie2-max-penalty 6 --bowtie2-min-penalty 2 --bowtie2-penalty-for-N 1 --bowtie2-read-gap-open 5 --bowtie2-read-gap-cont 3 --bowtie2-ref-gap-open 5 --bowtie2-ref-gap-cont 3 TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min.fa TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.bam TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.juncs /dev/null /dev/null /dev/null TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.candidates.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.bam,TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg1.to_spliced.bam,TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um_seg2.to_spliced.bam
#>tophat_reports:
/n/local/stage/tophat/tophat_2.0.8/tophat_reports --min-anchor 8 --splice-mismatches 0 --min-report-intron 50 --max-report-intron 500000 --min-isoform-fraction 0.15 --output-dir TopHat_aln/4hoursposttraining3/ --max-multihits 20 --max-seg-multihits 40 --segment-length 25 --segment-mismatches 2 --min-closure-exon 100 --min-closure-intron 50 --max-closure-intron 5000 --min-coverage-intron 50 --max-coverage-intron 20000 --min-segment-intron 50 --max-segment-intron 500000 --read-mismatches 2 --read-gap-length 2 --read-edit-dist 2 --read-realign-edit-dist 3 --max-insertion-length 3 --max-deletion-length 3 -z gzip -p8 --gtf-annotations /home/mab/Genomes/bowtie_indexes/tophat_tx/Drosophila_melanogaster.BDGP5.71.min.tc.gff --gtf-juncs TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.juncs --no-closure-search --no-microexon-search --sam-header TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min_genome.bwt.samheader.sam --report-discordant-pair-alignments --report-mixed-alignments --samtools=/n/local/bin/samtools --bowtie2-max-penalty 6 --bowtie2-min-penalty 2 --bowtie2-penalty-for-N 1 --bowtie2-read-gap-open 5 --bowtie2-read-gap-cont 3 --bowtie2-ref-gap-open 5 --bowtie2-ref-gap-cont 3 TopHat_aln/4hoursposttraining3/tmp/Drosophila_melanogaster.BDGP5.71.min.fa TopHat_aln/4hoursposttraining3/junctions.bed TopHat_aln/4hoursposttraining3/insertions.bed TopHat_aln/4hoursposttraining3/deletions.bed TopHat_aln/4hoursposttraining3/fusions.out TopHat_aln/4hoursposttraining3/tmp/accepted_hits TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g.bam,TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.mapped.bam,TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.m2g_um.candidates.bam TopHat_aln/4hoursposttraining3/tmp/left_kept_reads.bam
/n/local/bin/samtools sort TopHat_aln/4hoursposttraining3/tmp/accepted_hits0.bam TopHat_aln/4hoursposttraining3/tmp/accepted_hits0_sorted
#>alldone:
